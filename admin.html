<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>16 EASTERN PARK 管理后台</title>
<link rel="stylesheet" href="https://unpkg.com/antd@5.12.8/dist/reset.css">
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/dayjs@1.11.10/dayjs.min.js"></script>
<script src="https://unpkg.com/antd@5.12.8/dist/antd.min.js"></script>
<script src="https://unpkg.com/lucide@0.344.0/dist/umd/lucide.min.js"></script>
<style>
:root{--brand:#0D6B5E;--dark:#0A1A18;--brand-light:#14917F;--brand-bg:rgba(13,107,94,0.08)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'PingFang SC','Hiragino Sans GB','Microsoft YaHei',sans-serif;background:#f0f2f5;color:#333}
.layout{display:flex;height:100vh;overflow:hidden}
.sidebar{width:240px;min-width:240px;background:var(--dark);color:#fff;display:flex;flex-direction:column;transition:width .2s}
.sidebar-logo{padding:20px 16px;border-bottom:1px solid rgba(255,255,255,.08);display:flex;align-items:center;gap:10px}
.sidebar-logo h1{font-size:14px;font-weight:600;color:#fff;line-height:1.3}
.sidebar-logo .logo-icon{width:36px;height:36px;background:var(--brand);border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;flex-shrink:0}
.menu{flex:1;overflow-y:auto;padding:8px 0}
.menu-item{display:flex;align-items:center;gap:10px;padding:12px 20px;cursor:pointer;color:rgba(255,255,255,.6);transition:all .15s;font-size:14px;border-left:3px solid transparent}
.menu-item:hover{color:#fff;background:rgba(255,255,255,.04)}
.menu-item.active{color:#fff;background:rgba(13,107,94,.25);border-left-color:var(--brand)}
.menu-item svg{width:18px;height:18px;flex-shrink:0}
.header{height:56px;background:#fff;border-bottom:1px solid #e8e8e8;display:flex;align-items:center;justify-content:space-between;padding:0 24px;flex-shrink:0}
.header-left{display:flex;align-items:center;gap:8px;color:#666;font-size:14px}
.header-right{display:flex;align-items:center;gap:16px}
.header-right .avatar{width:32px;height:32px;border-radius:50%;background:var(--brand);color:#fff;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:500}
.main-wrap{flex:1;display:flex;flex-direction:column;overflow:hidden}
.main{flex:1;overflow-y:auto;padding:24px}
/* Cards */
.stat-cards{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}
.stat-card{background:#fff;border-radius:12px;padding:20px 24px;box-shadow:0 1px 3px rgba(0,0,0,.06)}
.stat-card .label{font-size:13px;color:#999;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.stat-card .value{font-size:32px;font-weight:700;color:var(--brand)}
.stat-card .sub{font-size:12px;color:#999;margin-top:4px}
/* Chart */
.chart-section{display:grid;grid-template-columns:2fr 1fr;gap:16px;margin-bottom:24px}
.card{background:#fff;border-radius:12px;padding:20px 24px;box-shadow:0 1px 3px rgba(0,0,0,.06)}
.card h3{font-size:15px;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.bar-chart{display:flex;align-items:flex-end;gap:8px;height:160px;padding-top:8px}
.bar-col{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px}
.bar{width:100%;border-radius:4px 4px 0 0;background:var(--brand);transition:height .3s;min-height:4px}
.bar-label{font-size:11px;color:#999}
.bar-val{font-size:11px;color:var(--brand);font-weight:600}
/* Table */
.toolbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;flex-wrap:wrap;gap:12px}
.toolbar-left{display:flex;gap:8px;flex-wrap:wrap}
.search-input{padding:7px 12px;border:1px solid #d9d9d9;border-radius:6px;font-size:13px;width:220px;outline:none;transition:border .2s}
.search-input:focus{border-color:var(--brand)}
select.filter-select{padding:7px 12px;border:1px solid #d9d9d9;border-radius:6px;font-size:13px;outline:none;background:#fff;cursor:pointer}
.btn{padding:7px 16px;border-radius:6px;font-size:13px;cursor:pointer;border:1px solid #d9d9d9;background:#fff;transition:all .15s;display:inline-flex;align-items:center;gap:6px}
.btn:hover{border-color:var(--brand);color:var(--brand)}
.btn-primary{background:var(--brand);color:#fff;border-color:var(--brand)}
.btn-primary:hover{background:var(--brand-light)}
.btn-sm{padding:4px 10px;font-size:12px}
.btn-danger{color:#ff4d4f;border-color:#ff4d4f}
.btn-danger:hover{background:#fff1f0}
table.data-table{width:100%;border-collapse:collapse;font-size:13px}
table.data-table th{background:#fafafa;padding:12px 16px;text-align:left;font-weight:600;color:#666;border-bottom:1px solid #f0f0f0;white-space:nowrap}
table.data-table td{padding:12px 16px;border-bottom:1px solid #f0f0f0}
table.data-table tr:nth-child(even){background:#fafafa}
table.data-table tr:hover{background:var(--brand-bg)}
.status-tag{display:inline-block;padding:2px 8px;border-radius:4px;font-size:12px}
.status-tag.active{background:#f6ffed;color:#52c41a;border:1px solid #b7eb8f}
.status-tag.pending{background:#fff7e6;color:#fa8c16;border:1px solid #ffd591}
.status-tag.disabled{background:#f5f5f5;color:#999;border:1px solid #d9d9d9}
.pagination{display:flex;justify-content:flex-end;align-items:center;gap:8px;margin-top:16px;font-size:13px}
.page-btn{width:32px;height:32px;border:1px solid #d9d9d9;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;background:#fff;font-size:13px}
.page-btn:hover,.page-btn.active{border-color:var(--brand);color:var(--brand)}
.page-btn.active{background:var(--brand);color:#fff}
.page-btn:disabled{opacity:.4;cursor:not-allowed}
/* Modal */
.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .15s}
.modal{background:#fff;border-radius:12px;width:560px;max-width:90vw;max-height:85vh;overflow-y:auto;box-shadow:0 8px 40px rgba(0,0,0,.15)}
.modal-header{padding:16px 24px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center}
.modal-header h3{font-size:16px;font-weight:600}
.modal-close{cursor:pointer;color:#999;width:24px;height:24px;display:flex;align-items:center;justify-content:center}
.modal-close:hover{color:#333}
.modal-body{padding:24px}
.modal-footer{padding:12px 24px;border-top:1px solid #f0f0f0;display:flex;justify-content:flex-end;gap:8px}
.form-group{margin-bottom:16px}
.form-group label{display:block;font-size:13px;color:#666;margin-bottom:6px}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:8px 12px;border:1px solid #d9d9d9;border-radius:6px;font-size:13px;outline:none}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-color:var(--brand)}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
/* Toggle */
.toggle{width:40px;height:22px;border-radius:11px;background:#ccc;cursor:pointer;position:relative;transition:background .2s}
.toggle.on{background:var(--brand)}
.toggle::after{content:'';position:absolute;width:18px;height:18px;border-radius:50%;background:#fff;top:2px;left:2px;transition:transform .2s}
.toggle.on::after{transform:translateX(18px)}
/* Activity list */
.activity-list{list-style:none}
.activity-list li{padding:10px 0;border-bottom:1px solid #f5f5f5;font-size:13px;display:flex;align-items:center;gap:8px}
.activity-list li:last-child{border-bottom:none}
.activity-dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.activity-time{color:#999;font-size:12px;margin-left:auto;white-space:nowrap}
/* User avatar */
.user-avatar{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff;font-weight:500;flex-shrink:0}
/* Banner placeholder */
.banner-preview{width:120px;height:48px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:10px;color:rgba(255,255,255,.7)}
/* Tabs */
.tabs{display:flex;gap:0;border-bottom:1px solid #f0f0f0;margin-bottom:20px}
.tab{padding:10px 20px;cursor:pointer;font-size:14px;color:#666;border-bottom:2px solid transparent;transition:all .15s}
.tab:hover{color:var(--brand)}
.tab.active{color:var(--brand);border-bottom-color:var(--brand);font-weight:500}
/* Points rule card */
.rule-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}
.rule-card{background:#fff;border:1px solid #f0f0f0;border-radius:10px;padding:20px}
.rule-card h4{font-size:14px;margin-bottom:12px;display:flex;align-items:center;gap:8px}
.rule-card .rule-value{font-size:28px;font-weight:700;color:var(--brand)}
.rule-card .rule-desc{font-size:12px;color:#999;margin-top:4px}
/* Settings */
.settings-section{margin-bottom:32px}
.settings-section h3{font-size:16px;font-weight:600;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #f0f0f0}
.info-grid{display:grid;grid-template-columns:120px 1fr;gap:12px 16px;font-size:14px}
.info-grid .label{color:#999}
/* Responsive */
@media(max-width:768px){.sidebar{width:60px;min-width:60px}.sidebar-logo h1,.menu-item span{display:none}.sidebar-logo{padding:16px 12px;justify-content:center}.menu-item{justify-content:center;padding:12px}.stat-cards{grid-template-columns:repeat(2,1fr)}.chart-section{grid-template-columns:1fr}.rule-cards{grid-template-columns:1fr}.form-row{grid-template-columns:1fr}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.lucide-icon{display:inline-flex;align-items:center;justify-content:center}
</style>
</head>
<body>
<div id="app"></div>
<script>
const h = React.createElement;
const {useState, useEffect, useMemo, useCallback, useRef} = React;

// ===== DATA =====
const MERCHANTS = [
  {id:1,name:'星巴克（成都锦江东韵里店）',category:'咖啡茶饮',building:'1栋',floor:'1F',rating:4.3,price:'¥30/人',status:'营业中',pet:true},
  {id:2,name:'留一手火锅',category:'火锅',building:'2栋',floor:'2F',rating:4.5,price:'¥85/人',status:'营业中',pet:false},
  {id:3,name:'全家便利店',category:'便利店',building:'1栋',floor:'1F',rating:4.1,price:'¥15/人',status:'营业中',pet:false},
  {id:4,name:'比亚迪体验中心',category:'汽车',building:'3栋',floor:'1F',rating:4.6,price:'-',status:'营业中',pet:true},
  {id:5,name:'嗨味小馆',category:'小吃快餐',floor:'1F',rating:4.4,price:'¥25/人',status:'营业中'},
  {id:6,name:'放鱼岛鲜鱼火锅',category:'火锅',floor:'2F',rating:4.3,price:'¥70/人',status:'营业中'},
  {id:7,name:'当时麻辣烫',category:'小吃快餐',floor:'1F',rating:4.2,price:'¥20/人',status:'营业中'},
  {id:8,name:'MANNER COFFEE',category:'咖啡茶饮',floor:'1F',rating:4.5,price:'¥20/人',status:'即将入驻'},
  {id:9,name:'瑞幸咖啡',category:'咖啡茶饮',floor:'1F',rating:4.0,price:'¥15/人',status:'即将入驻'},
  {id:10,name:'霸王茶姬',category:'茶饮',floor:'1F',rating:4.4,price:'¥18/人',status:'即将入驻'},
];

const LEVELS = ['翡翠会员','铂金会员','钻石会员','黑金会员'];
const SURNAMES = '赵钱孙李周吴郑王冯陈褚卫蒋沈韩杨朱秦尤许何吕施张孔曹严华金魏陶姜谢邹喻柏窦章苏潘葛范彭鲁韦马苗方俞任袁柳唐罗薛雷贺倪汤滕殷罗毕郝邬安常乐于时傅卞齐康伍余元顾孟平黄';
const NAMES = '伟芳娜秀英敏静丽强磊洋勇艳杰娟涛超明华旭林萍鑫亮玲桂丹萌蕾彬博宁婷瑶翔鹏程昊然欣怡紫嫣梦琪宇轩浩铭思源雅诗晨曦逸飞天佑';
function randName(){return SURNAMES[Math.floor(Math.random()*SURNAMES.length)]+NAMES[Math.floor(Math.random()*NAMES.length)]+NAMES[Math.floor(Math.random()*NAMES.length)]}
function randPhone(){return '1'+'3456789'[Math.floor(Math.random()*7)]+(Math.floor(Math.random()*900000000)+100000000)}
const COLORS = ['#0D6B5E','#1890ff','#722ed1','#eb2f96','#fa8c16','#13c2c2','#52c41a','#f5222d'];
const MEMBERS = Array.from({length:50},(_,i)=>{
  const name=randName();
  return {id:i+1,name,phone:randPhone(),level:LEVELS[Math.floor(Math.random()*4)],points:Math.floor(Math.random()*12000),registerDate:`2025-${String(Math.floor(Math.random()*12)+1).padStart(2,'0')}-${String(Math.floor(Math.random()*28)+1).padStart(2,'0')}`,status:Math.random()>.1?'正常':'冻结',color:COLORS[i%8]}
});

const COUPONS = [
  {id:1,name:'新会员专享10元券',type:'满减券',value:'¥10',condition:'满50可用',expiry:'2026-06-30',issued:320,used:198,status:'进行中'},
  {id:2,name:'星巴克买一赠一',type:'商户券',value:'买一赠一',condition:'限星巴克',expiry:'2026-03-31',issued:150,used:89,status:'进行中'},
  {id:3,name:'停车2小时免费券',type:'停车券',value:'2小时',condition:'消费满100',expiry:'2026-12-31',issued:200,used:156,status:'进行中'},
  {id:4,name:'周末双倍积分卡',type:'积分券',value:'双倍',condition:'周末使用',expiry:'2026-04-30',issued:500,used:312,status:'进行中'},
  {id:5,name:'生日月专属50元券',type:'满减券',value:'¥50',condition:'满200可用',expiry:'2026-12-31',issued:45,used:32,status:'进行中'},
];

const BANNERS = [
  {id:1,title:'春节嘉年华',link:'/activity/spring',sort:1,status:true,color:'#0D6B5E'},
  {id:2,title:'新会员注册礼',link:'/activity/newmember',sort:2,status:true,color:'#1890ff'},
  {id:3,title:'美食节专题',link:'/activity/food',sort:3,status:true,color:'#722ed1'},
  {id:4,title:'停车优惠活动',link:'/activity/parking',sort:4,status:false,color:'#fa8c16'},
];

const ACTIVITIES = [
  {id:1,name:'2026新春嘉年华',time:'2026-01-20 ~ 2026-02-20',status:'进行中',participants:1280},
  {id:2,name:'元宵猜灯谜',time:'2026-02-12 ~ 2026-02-15',status:'进行中',participants:356},
  {id:3,name:'三八女神节特惠',time:'2026-03-01 ~ 2026-03-10',status:'未开始',participants:0},
  {id:4,name:'周年庆典',time:'2025-12-01 ~ 2025-12-31',status:'已结束',participants:3420},
];

const ANNOUNCEMENTS = [
  {id:1,title:'2026年春节营业时间调整通知',time:'2026-01-15',status:'已发布'},
  {id:2,title:'会员积分兑换规则更新',time:'2026-01-10',status:'已发布'},
  {id:3,title:'3月份新商户入驻公告',time:'2026-02-12',status:'草稿'},
];

const ADMINS = [
  {id:1,name:'张明辉',role:'超级管理员',phone:'138****8001',lastLogin:'2026-02-12 22:30'},
  {id:2,name:'李文静',role:'运营管理员',phone:'139****5012',lastLogin:'2026-02-12 18:45'},
  {id:3,name:'王大力',role:'商户管理员',phone:'136****3088',lastLogin:'2026-02-11 14:20'},
];

const LOGS = [
  {time:'2026-02-12 23:15',user:'张明辉',action:'编辑商户信息','detail':'修改「星巴克」营业时间'},
  {time:'2026-02-12 22:30',user:'张明辉',action:'登录系统',detail:'IP: 192.168.1.100'},
  {time:'2026-02-12 18:50',user:'李文静',action:'发布优惠券',detail:'新增「情人节双人套餐券」'},
  {time:'2026-02-12 18:45',user:'李文静',action:'登录系统',detail:'IP: 10.0.0.52'},
  {time:'2026-02-12 15:20',user:'王大力',action:'审核商户',detail:'通过「霸王茶姬」入驻申请'},
  {time:'2026-02-11 14:20',user:'王大力',action:'登录系统',detail:'IP: 172.16.0.8'},
  {time:'2026-02-11 10:00',user:'张明辉',action:'更新Banner',detail:'上架「春节嘉年华」Banner'},
  {time:'2026-02-10 09:30',user:'李文静',action:'会员管理',detail:'冻结异常账户 ID#38'},
];

const POINTS_RECORDS = [
  {time:'2026-02-12 20:15',member:'陈明华',type:'消费积分',points:'+85',detail:'留一手火锅消费¥85'},
  {time:'2026-02-12 19:30',member:'王丽萍',type:'签到积分',points:'+10',detail:'每日签到'},
  {time:'2026-02-12 18:00',member:'张伟强',type:'活动积分',points:'+50',detail:'参与元宵猜灯谜'},
  {time:'2026-02-12 16:20',member:'李娜芳',type:'兑换扣减',points:'-200',detail:'兑换星巴克优惠券'},
  {time:'2026-02-12 14:10',member:'赵敏静',type:'消费积分',points:'+30',detail:'星巴克消费¥30'},
];

const POINTS_GOODS = [
  {id:1,name:'星巴克中杯美式兑换券',points:500,stock:100,exchanged:45,status:true},
  {id:2,name:'停车1小时免费券',points:300,stock:200,exchanged:132,status:true},
  {id:3,name:'定制品牌帆布袋',points:1000,stock:50,exchanged:12,status:true},
  {id:4,name:'全家10元代金券',points:200,stock:300,exchanged:210,status:true},
  {id:5,name:'品牌限定保温杯',points:3000,stock:20,exchanged:5,status:false},
];

// ===== ICONS =====
function LucideIcon({name,size=18,color='currentColor',className=''}){
  const ref=useRef(null);
  useEffect(()=>{
    if(ref.current && lucide.icons[name]){
      const [tag,attrs,children]=lucide.icons[name];
      const svg=document.createElementNS('http://www.w3.org/2000/svg','svg');
      Object.entries({...attrs,width:size,height:size,stroke:color,fill:'none','stroke-width':2,'stroke-linecap':'round','stroke-linejoin':'round'}).forEach(([k,v])=>svg.setAttribute(k,String(v)));
      children.forEach(([t,a])=>{const el=document.createElementNS('http://www.w3.org/2000/svg',t);Object.entries(a).forEach(([k,v])=>el.setAttribute(k,String(v)));svg.appendChild(el)});
      ref.current.innerHTML='';ref.current.appendChild(svg);
    }
  },[name,size,color]);
  return h('span',{ref,className:'lucide-icon '+className,style:{display:'inline-flex',alignItems:'center'}});
}

// ===== COMPONENTS =====
function Modal({title,onClose,children,footer}){
  return h('div',{className:'modal-overlay',onClick:e=>{if(e.target===e.currentTarget)onClose()}},
    h('div',{className:'modal'},
      h('div',{className:'modal-header'},h('h3',null,title),h('span',{className:'modal-close',onClick:onClose},h(LucideIcon,{name:'x',size:20}))),
      h('div',{className:'modal-body'},children),
      footer&&h('div',{className:'modal-footer'},footer)
    )
  );
}

function Pagination({total,page,pageSize=10,onChange}){
  const pages=Math.ceil(total/pageSize);
  if(pages<=1)return null;
  return h('div',{className:'pagination'},
    h('span',{style:{color:'#999'}},`共 ${total} 条`),
    h('button',{className:'page-btn',disabled:page<=1,onClick:()=>onChange(page-1)},h(LucideIcon,{name:'chevron-left',size:14})),
    ...Array.from({length:Math.min(pages,5)},(_,i)=>{
      const p=pages<=5?i+1:page<=3?i+1:page>=pages-2?pages-4+i:page-2+i;
      return h('button',{key:p,className:'page-btn'+(p===page?' active':''),onClick:()=>onChange(p)},p);
    }),
    h('button',{className:'page-btn',disabled:page>=pages,onClick:()=>onChange(page+1)},h(LucideIcon,{name:'chevron-right',size:14}))
  );
}

function Toggle({value,onChange}){
  return h('span',{className:'toggle'+(value?' on':''),onClick:()=>onChange&&onChange(!value)});
}

// ===== PAGES =====
function Dashboard(){
  const stats=[
    {label:'新增会员',value:'128',sub:'较昨日 +12%',icon:'user-plus',color:'#0D6B5E'},
    {label:'活跃用户',value:'1,856',sub:'较昨日 +5%',icon:'users',color:'#1890ff'},
    {label:'今日签到',value:'423',sub:'签到率 22.8%',icon:'calendar-check',color:'#722ed1'},
    {label:'积分发放',value:'35,280',sub:'较昨日 +8%',icon:'coins',color:'#fa8c16'},
  ];
  const chartData=[{d:'02-07',v:86},{d:'02-08',v:112},{d:'02-09',v:95},{d:'02-10',v:128},{d:'02-11',v:105},{d:'02-12',v:142},{d:'02-13',v:98}];
  const maxV=Math.max(...chartData.map(d=>d.v));
  const recent=[
    {text:'用户「陈明华」在留一手火锅消费¥85，获得85积分',time:'20:15',color:'#52c41a'},
    {text:'用户「王丽萍」完成每日签到，获得10积分',time:'19:30',color:'#1890ff'},
    {text:'新会员「林思远」注册，来源：小程序扫码',time:'18:45',color:'#0D6B5E'},
    {text:'用户「张伟强」参与元宵猜灯谜，获得50积分',time:'18:00',color:'#722ed1'},
    {text:'优惠券「新会员专享10元券」被领取 3 张',time:'17:20',color:'#fa8c16'},
    {text:'商户「霸王茶姬」入驻申请已通过',time:'15:20',color:'#13c2c2'},
    {text:'用户「李娜芳」兑换星巴克优惠券，扣减200积分',time:'14:10',color:'#eb2f96'},
  ];
  return h('div',null,
    h('div',{className:'stat-cards'},stats.map((s,i)=>
      h('div',{className:'stat-card',key:i},
        h('div',{className:'label'},h(LucideIcon,{name:s.icon,size:16,color:s.color}),s.label),
        h('div',{className:'value',style:{color:s.color}},s.value),
        h('div',{className:'sub'},s.sub)
      )
    )),
    h('div',{className:'chart-section'},
      h('div',{className:'card'},
        h('h3',null,h(LucideIcon,{name:'bar-chart-3',size:18,color:'var(--brand)'}),'近7天新增会员趋势'),
        h('div',{className:'bar-chart'},chartData.map((d,i)=>
          h('div',{className:'bar-col',key:i},
            h('div',{className:'bar-val'},d.v),
            h('div',{className:'bar',style:{height:Math.round(d.v/maxV*140)+'px'}}),
            h('div',{className:'bar-label'},d.d)
          )
        ))
      ),
      h('div',{className:'card'},
        h('h3',null,h(LucideIcon,{name:'activity',size:18,color:'var(--brand)'}),'最近动态'),
        h('ul',{className:'activity-list'},recent.map((r,i)=>
          h('li',{key:i},h('span',{className:'activity-dot',style:{background:r.color}}),h('span',null,r.text),h('span',{className:'activity-time'},r.time))
        ))
      )
    )
  );
}

function MerchantPage(){
  const [data,setData]=useState(MERCHANTS.map(m=>({building:m.building||'1栋',...m})));
  const [search,setSearch]=useState('');
  const [page,setPage]=useState(1);
  const [modal,setModal]=useState(null);
  const [form,setForm]=useState({});
  const filtered=data.filter(m=>m.name.toLowerCase().includes(search.toLowerCase())||m.category.includes(search));
  const paged=filtered.slice((page-1)*10,page*10);
  function openEdit(m){setForm({...m});setModal('edit')}
  function openAdd(){setForm({id:data.length+1,name:'',category:'',building:'1栋',floor:'1F',rating:4.0,price:'',status:'营业中',pet:false});setModal('add')}
  function save(){
    if(modal==='edit')setData(d=>d.map(m=>m.id===form.id?form:m));
    else setData(d=>[...d,form]);
    setModal(null);
  }
  const statusClass=s=>s==='营业中'?'active':s==='即将入驻'?'pending':'disabled';
  return h('div',null,
    h('div',{className:'card'},
      h('div',{className:'toolbar'},
        h('div',{className:'toolbar-left'},
          h('input',{className:'search-input',placeholder:'搜索商户名称或分类...',value:search,onChange:e=>{setSearch(e.target.value);setPage(1)}}),
        ),
        h('button',{className:'btn btn-primary',onClick:openAdd},h(LucideIcon,{name:'plus',size:14}),'新增商户')
      ),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['名称','分类','楼幢','楼层','宠物友好','评分','状态','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,paged.map(m=>
          h('tr',{key:m.id},
            h('td',{style:{fontWeight:500}},m.name),h('td',null,m.category),h('td',null,m.building||'-'),h('td',null,m.floor),
            h('td',null,h(Toggle,{value:m.pet})),
            h('td',null,h('span',{style:{color:'var(--brand)',fontWeight:600}},m.rating+'分')),
            h('td',null,h('span',{className:'status-tag '+statusClass(m.status)},m.status)),
            h('td',null,h('button',{className:'btn btn-sm',onClick:()=>openEdit(m)},h(LucideIcon,{name:'pencil',size:12}),'编辑'))
          )
        ))
      ),
      h(Pagination,{total:filtered.length,page,onChange:setPage})
    ),
    modal&&h(Modal,{title:modal==='edit'?'编辑商户':'新增商户',onClose:()=>setModal(null),
      footer:[h('button',{key:'c',className:'btn',onClick:()=>setModal(null)},'取消'),h('button',{key:'s',className:'btn btn-primary',onClick:save},'保存')]},
      h('div',{className:'form-group'},h('label',null,'商户名称'),h('input',{value:form.name||'',onChange:e=>setForm({...form,name:e.target.value})})),
      h('div',{className:'form-row'},
        h('div',{className:'form-group'},h('label',null,'分类'),h('input',{value:form.category||'',onChange:e=>setForm({...form,category:e.target.value})})),
        h('div',{className:'form-group'},h('label',null,'楼幢'),h('select',{value:form.building||'1栋',onChange:e=>setForm({...form,building:e.target.value})},['1栋','2栋','3栋','9栋','10栋'].map(b=>h('option',{key:b,value:b},b))))
      ),
      h('div',{className:'form-row'},
        h('div',{className:'form-group'},h('label',null,'楼层'),h('select',{value:form.floor||'1F',onChange:e=>setForm({...form,floor:e.target.value})},['1F','2F','3F','4F','B1','B2'].map(f=>h('option',{key:f,value:f},f))))
      ),
      h('div',{className:'form-row'},
        h('div',{className:'form-group'},h('label',null,'评分'),h('input',{type:'number',step:0.1,min:0,max:5,value:form.rating||'',onChange:e=>setForm({...form,rating:parseFloat(e.target.value)})})),
        h('div',{className:'form-group'},h('label',null,'人均消费'),h('input',{value:form.price||'',onChange:e=>setForm({...form,price:e.target.value})}))
      ),
      h('div',{className:'form-group'},h('label',null,'状态'),h('select',{value:form.status||'营业中',onChange:e=>setForm({...form,status:e.target.value})},['营业中','即将入驻','暂停营业'].map(s=>h('option',{key:s,value:s},s))))
    )
  );
}

function MemberPage(){
  const [search,setSearch]=useState('');
  const [levelFilter,setLevelFilter]=useState('');
  const [statusFilter,setStatusFilter]=useState('');
  const [page,setPage]=useState(1);
  const [detail,setDetail]=useState(null);
  const filtered=MEMBERS.filter(m=>{
    if(search&&!m.name.includes(search)&&!m.phone.includes(search))return false;
    if(levelFilter&&m.level!==levelFilter)return false;
    if(statusFilter&&m.status!==statusFilter)return false;
    return true;
  });
  const paged=filtered.slice((page-1)*10,page*10);
  const levelColor=l=>({翡翠会员:'#52c41a',铂金会员:'#1890ff',钻石会员:'#722ed1',黑金会员:'#0A1A18'}[l]||'#999');
  return h('div',null,
    h('div',{className:'card'},
      h('div',{className:'toolbar'},
        h('div',{className:'toolbar-left'},
          h('input',{className:'search-input',placeholder:'搜索昵称或手机号...',value:search,onChange:e=>{setSearch(e.target.value);setPage(1)}}),
          h('select',{className:'filter-select',value:levelFilter,onChange:e=>{setLevelFilter(e.target.value);setPage(1)}},h('option',{value:''},'全部等级'),...LEVELS.map(l=>h('option',{key:l,value:l},l))),
          h('select',{className:'filter-select',value:statusFilter,onChange:e=>{setStatusFilter(e.target.value);setPage(1)}},h('option',{value:''},'全部状态'),h('option',{value:'正常'},'正常'),h('option',{value:'冻结'},'冻结'))
        ),
      ),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['','昵称','手机号','等级','积分','注册时间','状态','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,paged.map(m=>
          h('tr',{key:m.id},
            h('td',null,h('div',{className:'user-avatar',style:{background:m.color}},m.name[0])),
            h('td',{style:{fontWeight:500}},m.name),
            h('td',null,m.phone.slice(0,3)+'****'+m.phone.slice(7)),
            h('td',null,h('span',{style:{color:levelColor(m.level),fontWeight:500}},m.level)),
            h('td',null,h('span',{style:{color:'var(--brand)',fontWeight:600}},m.points.toLocaleString())),
            h('td',null,m.registerDate),
            h('td',null,h('span',{className:'status-tag '+(m.status==='正常'?'active':'disabled')},m.status)),
            h('td',null,h('button',{className:'btn btn-sm',onClick:()=>setDetail(m)},h(LucideIcon,{name:'eye',size:12}),'详情'))
          )
        ))
      ),
      h(Pagination,{total:filtered.length,page,onChange:setPage})
    ),
    detail&&h(Modal,{title:'会员详情 - '+detail.name,onClose:()=>setDetail(null),footer:[h('button',{key:'c',className:'btn',onClick:()=>setDetail(null)},'关闭')]},
      h('div',{style:{display:'flex',gap:16,marginBottom:20,alignItems:'center'}},
        h('div',{className:'user-avatar',style:{background:detail.color,width:48,height:48,fontSize:18}},detail.name[0]),
        h('div',null,h('div',{style:{fontWeight:600,fontSize:16}},detail.name),h('div',{style:{color:'#999',fontSize:13}},detail.phone.slice(0,3)+'****'+detail.phone.slice(7),' · ',detail.level))
      ),
      h('div',{style:{display:'grid',gridTemplateColumns:'1fr 1fr 1fr',gap:12,marginBottom:20}},
        h('div',{className:'stat-card',style:{padding:12}},h('div',{className:'label'},'当前积分'),h('div',{className:'value',style:{fontSize:24}},detail.points.toLocaleString())),
        h('div',{className:'stat-card',style:{padding:12}},h('div',{className:'label'},'累计消费'),h('div',{className:'value',style:{fontSize:24,color:'#fa8c16'}},'¥'+(detail.points*1.2).toFixed(0))),
        h('div',{className:'stat-card',style:{padding:12}},h('div',{className:'label'},'签到天数'),h('div',{className:'value',style:{fontSize:24,color:'#722ed1'}},Math.floor(Math.random()*100+10)))
      ),
      h('h4',{style:{fontSize:14,fontWeight:600,marginBottom:12}},'最近积分记录'),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['时间','类型','积分','详情'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,
          [{time:'02-12 20:15',type:'消费积分',pts:'+45',d:'星巴克消费¥45'},
           {time:'02-12 08:00',type:'签到积分',pts:'+10',d:'每日签到'},
           {time:'02-11 19:30',type:'消费积分',pts:'+85',d:'留一手火锅消费¥85'},
           {time:'02-10 12:00',type:'兑换扣减',pts:'-200',d:'兑换停车券'}
          ].map((r,i)=>h('tr',{key:i},h('td',null,r.time),h('td',null,r.type),h('td',{style:{color:r.pts.startsWith('+')?'#52c41a':'#ff4d4f',fontWeight:600}},r.pts),h('td',null,r.d)))
        )
      )
    )
  );
}

function CouponPage(){
  const [page,setPage]=useState(1);
  const [modal,setModal]=useState(null);
  const [form,setForm]=useState({});
  function openAdd(){setForm({name:'',type:'满减券',value:'',condition:'',expiry:'',status:'进行中'});setModal('add')}
  return h('div',null,
    h('div',{className:'card'},
      h('div',{className:'toolbar'},
        h('div',{className:'toolbar-left'}),
        h('button',{className:'btn btn-primary',onClick:openAdd},h(LucideIcon,{name:'plus',size:14}),'新增优惠券')
      ),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['名称','类型','面值','使用条件','有效期','已发放','已使用','状态'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,COUPONS.map(c=>
          h('tr',{key:c.id},
            h('td',{style:{fontWeight:500}},c.name),h('td',null,c.type),
            h('td',{style:{color:'var(--brand)',fontWeight:600}},c.value),
            h('td',null,c.condition),h('td',null,c.expiry),
            h('td',null,c.issued),h('td',null,c.used),
            h('td',null,h('span',{className:'status-tag active'},c.status))
          )
        ))
      )
    ),
    modal&&h(Modal,{title:'新增优惠券',onClose:()=>setModal(null),
      footer:[h('button',{key:'c',className:'btn',onClick:()=>setModal(null)},'取消'),h('button',{key:'s',className:'btn btn-primary',onClick:()=>setModal(null)},'保存')]},
      h('div',{className:'form-group'},h('label',null,'优惠券名称'),h('input',{value:form.name,onChange:e=>setForm({...form,name:e.target.value})})),
      h('div',{className:'form-row'},
        h('div',{className:'form-group'},h('label',null,'类型'),h('select',{value:form.type,onChange:e=>setForm({...form,type:e.target.value})},['满减券','商户券','停车券','积分券'].map(t=>h('option',{key:t,value:t},t)))),
        h('div',{className:'form-group'},h('label',null,'面值'),h('input',{value:form.value,onChange:e=>setForm({...form,value:e.target.value})}))
      ),
      h('div',{className:'form-row'},
        h('div',{className:'form-group'},h('label',null,'使用条件'),h('input',{value:form.condition,onChange:e=>setForm({...form,condition:e.target.value})})),
        h('div',{className:'form-group'},h('label',null,'有效期'),h('input',{type:'date',value:form.expiry,onChange:e=>setForm({...form,expiry:e.target.value})}))
      )
    )
  );
}

function PointsPage(){
  const [tab,setTab]=useState('rules');
  return h('div',null,
    h('div',{className:'tabs'},
      ['rules','records','shop'].map(t=>h('div',{key:t,className:'tab'+(tab===t?' active':''),onClick:()=>setTab(t)},{rules:'积分规则',records:'发放记录',shop:'积分商城'}[t]))
    ),
    tab==='rules'&&h('div',null,
      h('div',{className:'rule-cards'},
        [{icon:'calendar-check',title:'签到积分',value:'10',desc:'每日签到获得10积分，连续7天额外+50'},
         {icon:'shopping-bag',title:'消费积分',value:'1:1',desc:'每消费1元获得1积分'},
         {icon:'trophy',title:'活动积分',value:'50',desc:'参与活动额外获得50积分'}
        ].map((r,i)=>h('div',{className:'rule-card card',key:i},
          h('h4',null,h(LucideIcon,{name:r.icon,size:18,color:'var(--brand)'}),r.title),
          h('div',{className:'rule-value'},r.value),
          h('div',{className:'rule-desc'},r.desc)
        ))
      )
    ),
    tab==='records'&&h('div',{className:'card'},
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['时间','会员','类型','积分','详情'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,POINTS_RECORDS.map((r,i)=>
          h('tr',{key:i},h('td',null,r.time),h('td',null,r.member),h('td',null,r.type),
            h('td',{style:{color:r.points.startsWith('+')?'#52c41a':'#ff4d4f',fontWeight:600}},r.points),h('td',null,r.detail))
        ))
      )
    ),
    tab==='shop'&&h('div',{className:'card'},
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['商品名称','所需积分','库存','已兑换','状态'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,POINTS_GOODS.map(g=>
          h('tr',{key:g.id},h('td',{style:{fontWeight:500}},g.name),
            h('td',{style:{color:'var(--brand)',fontWeight:600}},g.points),
            h('td',null,g.stock),h('td',null,g.exchanged),
            h('td',null,h(Toggle,{value:g.status}))
          )
        ))
      )
    )
  );
}

function BannerPage(){
  const [banners,setBanners]=useState(BANNERS);
  return h('div',null,
    h('div',{className:'card'},
      h('div',{className:'toolbar'},h('div',null),h('button',{className:'btn btn-primary'},h(LucideIcon,{name:'plus',size:14}),'新增Banner')),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['预览','标题','链接','排序','状态','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,banners.map((b,i)=>
          h('tr',{key:b.id},
            h('td',null,h('div',{className:'banner-preview',style:{background:b.color}},'720×300')),
            h('td',{style:{fontWeight:500}},b.title),h('td',null,b.link),
            h('td',null,h('div',{style:{display:'flex',gap:4}},
              h('button',{className:'btn btn-sm',disabled:i===0,onClick:()=>{const n=[...banners];[n[i-1],n[i]]=[n[i],n[i-1]];n.forEach((x,j)=>x.sort=j+1);setBanners(n)}},h(LucideIcon,{name:'arrow-up',size:12})),
              h('button',{className:'btn btn-sm',disabled:i===banners.length-1,onClick:()=>{const n=[...banners];[n[i],n[i+1]]=[n[i+1],n[i]];n.forEach((x,j)=>x.sort=j+1);setBanners(n)}},h(LucideIcon,{name:'arrow-down',size:12}))
            )),
            h('td',null,h(Toggle,{value:b.status,onChange:v=>{const n=[...banners];n[i]={...n[i],status:v};setBanners(n)}})),
            h('td',null,h('button',{className:'btn btn-sm'},h(LucideIcon,{name:'pencil',size:12}),'编辑'))
          )
        ))
      )
    )
  );
}

function ContentPage(){
  const [tab,setTab]=useState('moments');
  return h('div',null,
    h('div',{className:'tabs'},
      h('div',{className:'tab'+(tab==='moments'?' active':''),onClick:()=>setTab('moments')},'每日瞬间'),
      h('div',{className:'tab'+(tab==='activities'?' active':''),onClick:()=>setTab('activities')},'活动管理'),
      h('div',{className:'tab'+(tab==='announcements'?' active':''),onClick:()=>setTab('announcements')},'公告管理')
    ),
    tab==='moments'&&h('div',{className:'card'},
      h('div',{className:'toolbar'},h('div',null),h('button',{className:'btn btn-primary'},h(LucideIcon,{name:'plus',size:14}),'发布瞬间')),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['预览','内容','发布时间','点赞','状态','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,MOMENTS.map(m=>
          h('tr',{key:m.id},
            h('td',null,h('img',{src:m.image,style:{width:60,height:60,borderRadius:4,objectFit:'cover'}})),
            h('td',{style:{maxWidth:300}},m.content),
            h('td',null,m.time),h('td',null,m.likes),
            h('td',null,h('span',{className:'status-tag active'},m.status)),
            h('td',null,h('button',{className:'btn btn-sm'},h(LucideIcon,{name:'trash-2',size:12}),'删除'))
          )
        ))
      )
    ),
    tab==='activities'&&h('div',{className:'card'},
      h('div',{className:'toolbar'},h('div',null),h('button',{className:'btn btn-primary'},h(LucideIcon,{name:'plus',size:14}),'新增活动')),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['活动名称','时间','状态','参与人数','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,ACTIVITIES.map(a=>
          h('tr',{key:a.id},h('td',{style:{fontWeight:500}},a.name),h('td',null,a.time),
            h('td',null,h('span',{className:'status-tag '+(a.status==='进行中'?'active':a.status==='未开始'?'pending':'disabled')},a.status)),
            h('td',null,a.participants.toLocaleString()),
            h('td',null,h('button',{className:'btn btn-sm'},h(LucideIcon,{name:'pencil',size:12}),'编辑'))
          )
        ))
      )
    ),
    tab==='announcements'&&h('div',{className:'card'},
      h('div',{className:'toolbar'},h('div',null),h('button',{className:'btn btn-primary'},h(LucideIcon,{name:'plus',size:14}),'新增公告')),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['标题','发布时间','状态','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,ANNOUNCEMENTS.map(a=>
          h('tr',{key:a.id},h('td',{style:{fontWeight:500}},a.title),h('td',null,a.time),
            h('td',null,h('span',{className:'status-tag '+(a.status==='已发布'?'active':'pending')},a.status)),
            h('td',null,h('button',{className:'btn btn-sm'},h(LucideIcon,{name:'pencil',size:12}),'编辑'))
          )
        ))
      )
    )
  );
}

function JointPage(){
  return h('div',null,
    h('div',{className:'card'},
      h('div',{className:'toolbar'},
        h('div',{className:'toolbar-left'},h('span',{style:{fontSize:14,color:'#666'}},'商户跨店流量互助配置')),
        h('button',{className:'btn btn-primary'},h(LucideIcon,{name:'plus',size:14}),'新增配置')
      ),
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['主商户 (消费端)','联名商户 (权益端)','发放权益','状态','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,JOINT_RULES.map(r=>
          h('tr',{key:r.id},
            h('td',{style:{fontWeight:500}},r.from),
            h('td',null,r.to),
            h('td',{style:{color:'var(--brand)',fontWeight:600}},r.benefit),
            h('td',null,h(Toggle,{value:r.status})),
            h('td',null,h('button',{className:'btn btn-sm'},h(LucideIcon,{name:'pencil',size:12}),'编辑'))
          )
        ))
      )
    ),
    h('div',{className:'card',style:{marginTop:24,background:'var(--brand-bg)',borderColor:'var(--brand)'}},
      h('h3',null,h(LucideIcon,{name:'info',size:18,color:'var(--brand)'}),'策略说明'),
      h('p',{style:{fontSize:13,color:'#666',lineHeight:1.6}},
        '1. 主商户：用户在该商户完成支付后，小程序将自动弹出联名商户的权益。',h('br'),
        '2. 联名商户：提供实际到店兑换权益的商户。',h('br'),
        '3. 此功能旨在建立街区内的商户流量互助网络，降低用户的跨店决策成本。'
      )
    )
  );
}

function SettingsPage(){
  const [tab,setTab]=useState('info');
  return h('div',null,
    h('div',{className:'tabs'},
      h('div',{className:'tab'+(tab==='info'?' active':''),onClick:()=>setTab('info')},'基本信息'),
      h('div',{className:'tab'+(tab==='admins'?' active':''),onClick:()=>setTab('admins')},'管理员'),
      h('div',{className:'tab'+(tab==='logs'?' active':''),onClick:()=>setTab('logs')},'操作日志')
    ),
    tab==='info'&&h('div',{className:'card'},
      h('div',{className:'info-grid'},
        h('span',{className:'label'},'项目名称'),h('span',null,'16 EASTERN PARK / 东韵16号'),
        h('span',{className:'label'},'地址'),h('span',null,'成都市锦江区汇泉南路35号'),
        h('span',{className:'label'},'运营方'),h('span',null,'成都鑫有上房物业管理有限公司'),
        h('span',{className:'label'},'联系电话'),h('span',null,'028-8888-6666'),
        h('span',{className:'label'},'客服微信'),h('span',null,'DY16_service'),
        h('span',{className:'label'},'小程序AppID'),h('span',null,'wx1234567890abcdef')
      )
    ),
    tab==='admins'&&h('div',{className:'card'},
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['姓名','角色','手机号','最后登录','操作'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,ADMINS.map(a=>
          h('tr',{key:a.id},h('td',{style:{fontWeight:500}},a.name),h('td',null,a.role),h('td',null,a.phone),h('td',null,a.lastLogin),
            h('td',null,h('button',{className:'btn btn-sm'},h(LucideIcon,{name:'pencil',size:12}),'编辑'))
          )
        ))
      )
    ),
    tab==='logs'&&h('div',{className:'card'},
      h('table',{className:'data-table'},
        h('thead',null,h('tr',null,['时间','操作人','操作','详情'].map(t=>h('th',{key:t},t)))),
        h('tbody',null,LOGS.map((l,i)=>
          h('tr',{key:i},h('td',null,l.time),h('td',null,l.user),h('td',null,l.action),h('td',null,l.detail))
        ))
      )
    )
  );
}

// ===== APP =====
const MOMENTS = [
  {id:1,image:'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400',content:'晨光中的东韵16号，光影流转，万物生长。',time:'2026-02-13 08:30',likes:24,status:'已发布'},
  {id:2,image:'https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=400',content:'一杯手冲，开启今日的艺术之旅。',time:'2026-02-12 10:15',likes:45,status:'已发布'},
  {id:3,image:'https://images.unsplash.com/photo-1559339352-11d035aa65de?w=400',content:'街区的转角，总有不经意的温柔。',time:'2026-02-11 17:00',likes:32,status:'已发布'},
];

const JOINT_RULES = [
  {id:1,from:'星巴克',to:'留一手火锅',benefit:'饭后消食甜品一份',status:true},
  {id:2,from:'留一手火锅',to:'比亚迪体验中心',benefit:'免费车辆检测/洗车',status:true},
  {id:3,from:'比亚迪体验中心',to:'全家便利店',benefit:'冷萃咖啡一瓶',status:true},
  {id:4,from:'全家便利店',to:'MANNER COFFEE',benefit:'升杯优惠券',status:false},
];

const MENU = [
  {key:'dashboard',label:'数据概览',icon:'layout-dashboard'},
  {key:'merchants',label:'商户管理',icon:'store'},
  {key:'members',label:'会员管理',icon:'users'},
  {key:'coupons',label:'优惠券管理',icon:'ticket'},
  {key:'points',label:'积分管理',icon:'coins'},
  {key:'banners',label:'Banner管理',icon:'image'},
  {key:'content',label:'内容管理',icon:'file-text'},
  {key:'joint',label:'联名互助',icon:'handshake'},
  {key:'settings',label:'系统设置',icon:'settings'},
];

function App(){
  const [active,setActive]=useState('dashboard');
  const pages={dashboard:Dashboard,merchants:MerchantPage,members:MemberPage,coupons:CouponPage,points:PointsPage,banners:BannerPage,content:ContentPage,joint:JointPage,settings:SettingsPage};
  const Page=pages[active];
  const menuLabel=MENU.find(m=>m.key===active)?.label||'';
  return h('div',{className:'layout'},
    h('nav',{className:'sidebar'},
      h('div',{className:'sidebar-logo'},
        h('div',{className:'logo-icon'},'16'),
        h('h1',null,'16 EASTERN PARK','  ',h('br'),h('span',{style:{fontSize:11,opacity:.6,fontWeight:400}},'管理后台'))
      ),
      h('div',{className:'menu'},MENU.map(m=>
        h('div',{key:m.key,className:'menu-item'+(active===m.key?' active':''),onClick:()=>setActive(m.key)},
          h(LucideIcon,{name:m.icon,size:18}),h('span',null,m.label)
        )
      )),
      h('div',{style:{padding:'12px 16px',borderTop:'1px solid rgba(255,255,255,.08)',fontSize:11,color:'rgba(255,255,255,.3)'}},
        h('span',null,'成都鑫有上房物业管理有限公司')
      )
    ),
    h('div',{className:'main-wrap'},
      h('header',{className:'header'},
        h('div',{className:'header-left'},h(LucideIcon,{name:'chevron-right',size:14}),' ',menuLabel),
        h('div',{className:'header-right'},
          h(LucideIcon,{name:'bell',size:18,color:'#999'}),
          h('div',{className:'avatar'},'张'),
          h('span',{style:{fontSize:13,color:'#666'}},'张明辉')
        )
      ),
      h('main',{className:'main'},h(Page))
    )
  );
}

ReactDOM.createRoot(document.getElementById('app')).render(h(App));
</script>
</body>
</html>
